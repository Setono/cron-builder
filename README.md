# Cron Builder - Build cron files from a config in your repository

[![Latest Version][ico-version]][link-packagist]
[![Latest Unstable Version][ico-unstable-version]][link-packagist]
[![Software License][ico-license]](LICENSE)
[![Build Status][ico-github-actions]][link-github-actions]
[![Coverage Status][ico-code-coverage]][link-code-coverage]

## Installation

```bash
$ composer require setono/cron-builder
```

## Usage

The following two code snippets outlines the simplest usage of the cron builder.

**1. Add your commands**

The default directory to look for cronjobs is inside `etc/cronjobs`. This can be changed in the options of the `CronBuilder`.

Here we define two jobs. Two PHP commands that run on the given time.

```yaml
# etc/cronjobs/jobs.yaml

- schedule: "0 0 * * *"
  command: "php first-script.php"

- schedule: "1 0 * * *"
  command: "php second-script.php"
```

**2. Build the crontab**

When your cronjobs are defined, you can build the crontab file:

```php
<?php
use Setono\CronBuilder\CronBuilder;

$cronBuilder = new CronBuilder();
$crontab = $cronBuilder->build();
```

This will output the following:

```text
###> Automatically generated by Setono Cron Builder - Do not edit ###
0 0 * * * php first-script.php
1 0 * * * php second-script.php
###< Automatically generated by Setono Cron Builder - Do not edit ###
```

You can save this in a file named `crontab.txt` and add it to your crontab like this:

```bash
$  cat crontab.txt | crontab -
```

[ico-version]: https://poser.pugx.org/setono/cron-builder/v/stable
[ico-unstable-version]: https://poser.pugx.org/setono/cron-builder/v/unstable
[ico-license]: https://poser.pugx.org/setono/cron-builder/license
[ico-github-actions]: https://github.com/Setono/cron-builder/workflows/build/badge.svg
[ico-code-coverage]: https://codecov.io/gh/Setono/cron-builder/branch/master/graph/badge.svg

[link-packagist]: https://packagist.org/packages/setono/cron-builder
[link-github-actions]: https://github.com/Setono/cron-builder/actions
[link-code-coverage]: https://codecov.io/gh/Setono/cron-builder
